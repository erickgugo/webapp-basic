<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <f:facet name="first">
        <meta http-equiv="x-ua-compatible" content="IE=edge"/>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
    </f:facet>


</h:head>
<h:body>
    <h:form id="fr">
        <p:commandButton value="Nuevo" icon="pi pi-user-plus" styleClass="ui-button-success"
                         oncomplete="PF('dlgVar').show();"/>
        <div align="center" style="padding: 50px">
            <p:dataTable id="Usuarios" var="user" value="#{indexBean.listUser}">

                <p:column headerText="Id">
                    <p:outputLabel value="#{user.id}"/>
                </p:column>
                <p:column headerText="Nombres">
                    <p:outputLabel value="#{user.nombre}"/>
                </p:column>
                <p:column headerText="Apellidos">
                    <p:outputLabel value="#{user.apellido}"/>
                </p:column>
                <p:column headerText="Telefonos">
                    <p:outputLabel value="#{user.telefono}"/>
                </p:column>
                <p:column headerText="Email">
                    <p:outputLabel value="#{user.email}"/>
                </p:column>
                <p:column headerText="Usuarios">
                    <p:outputLabel value="#{user.usuario}"/>
                </p:column>
                <p:column headerText="Claves">
                    <p:outputLabel value="#{user.clave}"/>
                </p:column>
                <p:column>
                    <p:commandButton icon="pi pi-user-minus" styleClass="rounded-button ui-button-danger"
                    oncomplete="PF('dlgConDelVar').show()" update="dlgConDel">
                        <f:setPropertyActionListener value="#{user}" target="#{indexBean.user}"/>
                    </p:commandButton>
                    <p:commandButton icon="pi pi-user-edit" styleClass="rounded-button ui-button-warning"
                                     oncomplete="PF('dlgEditVar').show()" update="dlgEdit">
                        <f:setPropertyActionListener value="#{user}" target="#{indexBean.user}"/>
                    </p:commandButton>
                </p:column>
            </p:dataTable>
        </div>
    </h:form>
    <p:dialog id="dlg" widgetVar="dlgVar" closeOnEscape="true" modal="true"
              header="Formulario de usuario">
        <h:form>
            <p:panelGrid columns="4">
                <p:outputLabel value="Nombres"/>
                <p:inputText value="#{indexBean.user.nombre}"/>
                <p:outputLabel value="Apellidos"/>
                <p:inputText value="#{indexBean.user.apellido}"/>
                <p:outputLabel value="Telefono"/>
                <p:inputText value="#{indexBean.user.telefono}"/>
                <p:outputLabel value="Email"/>
                <p:inputText value="#{indexBean.user.email}"/>
                <p:outputLabel value="Usuarios"/>
                <p:inputText value="#{indexBean.user.usuario}"/>
                <p:outputLabel value="Clave"/>
                <p:inputText value="#{indexBean.user.clave}"/>

            </p:panelGrid>
            <br></br>
            <br></br>
            <p:commandButton value="Anadir datos" action="#{indexBean.actionAdd}" update="fr"
                             oncomplete="PF('dlgVar').hide();"/>
        </h:form>
    </p:dialog>

    <p:dialog id="dlgEdit" widgetVar="dlgEditVar" closeOnEscape="true" modal="true"
              header="Formulario de usuario">
        <h:form>
            <p:panelGrid columns="4">
                <p:outputLabel value="Nombres"/>
                <p:inputText value="#{indexBean.user.nombre}"/>
                <p:outputLabel value="Apellidos"/>
                <p:inputText value="#{indexBean.user.apellido}"/>
                <p:outputLabel value="Telefono"/>
                <p:inputText value="#{indexBean.user.telefono}"/>
                <p:outputLabel value="Email"/>
                <p:inputText value="#{indexBean.user.email}"/>
                <p:outputLabel value="Usuarios"/>
                <p:inputText value="#{indexBean.user.usuario}"/>
                <p:outputLabel value="Clave"/>
                <p:inputText value="#{indexBean.user.clave}"/>

            </p:panelGrid>
            <br></br>
            <br></br>
            <p:commandButton value="Editar datos" action="#{indexBean.actionEdit}" update="fr"
                             oncomplete="PF('dlgEditVar').hide();"/>
        </h:form>
    </p:dialog>

    <p:dialog id="dlgConDel" widgetVar="dlgConDelVar" closeOnEscape="true" modal="true"
              header="Eliminacion de usuario">
        <h:form>
            <h:outputLabel value="Esta seguro de eliminar a: "/>
            <h:outputLabel value="#{indexBean.user.usuario}" style="font-weight: bold; color: red; text-transform:uppercase;"/>
            <h:outputLabel value="?"/>
            <br/>
            <br/>
            <p:commandButton value="SI" action="#{indexBean.actionDelete()}"
                             oncomplete="PF('dlgConDelVar').hide();" update="fr"/>
            <p:commandButton value="NO"
                             oncomplete="PF('dlgConDelVar').hide();" style="margin-left: 1em;"/>
        </h:form>
    </p:dialog>
</h:body>
</html>
